<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Stella::Utils [stella 0.8.6.001]</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Module</span>
          Stella::Utils
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../files/lib/stella/utils_rb.html">lib/stella/utils.rb</a>
          </li>
        </ol>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            A motley collection of methods that <a href="../Stella.html">Stella</a>
            loves to call!
            </p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000134">autoload_vendor</a></li>
              <li><a href="#M000130">external_ip_address</a></li>
              <li><a href="#M000131">internal_ip_address</a></li>
              <li><a href="#M000138">noindent</a></li>
              <li><a href="#M000132">require_glob</a></li>
              <li><a href="#M000133">require_vendor</a></li>
              <li><a href="#M000135">service_available?</a></li>
              <li><a href="#M000137">strand</a></li>
              <li><a href="#M000136">write_to_file</a></li>
            </ol>
          </div>
          <div id='context'>
            <div id='includes'>
              <h2>Included modules</h2>
              <ol>
                <li>Socket::Constants</li>
              </ol>
            </div>
          </div>
          <div id='section'>
            <div id='methods'>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M000134'>
                <a name='M000134'>      </a>
                <div class='synopsis'>
                  <span class='name'>autoload_vendor</span>
                  <span class='arguments'>(mod, name, version)</span>
                </div>
                <div class='description'>
                  <p>
                  Same as <tt><a href="Utils.html#M000133">require_vendor</a></tt>, but uses
                  <tt>autoload</tt> instead.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000134-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000134-source'><span class="ruby-comment cmt"># File lib/stella/utils.rb, line 72</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">autoload_vendor</span>(<span class="ruby-identifier">mod</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">version</span>)&#x000A;      <span class="ruby-identifier">autoload</span> <span class="ruby-identifier">mod</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">STELLA_LIB_HOME</span>, <span class="ruby-value str">'..'</span>, <span class="ruby-value str">'vendor'</span>, <span class="ruby-node">&quot;#{name}-#{version}&quot;</span>, <span class="ruby-identifier">name</span>)&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000130'>
                <a name='M000130'>      </a>
                <div class='synopsis'>
                  <span class='name'>external_ip_address</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Return the external IP address (the one seen by the internet)
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000130-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000130-source'><span class="ruby-comment cmt"># File lib/stella/utils.rb, line 13</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">external_ip_address</span>&#x000A;      <span class="ruby-identifier">ip</span> = <span class="ruby-keyword kw">nil</span>&#x000A;      <span class="ruby-keyword kw">begin</span>&#x000A;        <span class="ruby-node">%w{solutious.heroku.com/ip}</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sponge</span><span class="ruby-operator">|</span>&#x000A;          <span class="ruby-identifier">ipstr</span> = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTP</span>.<span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-node">&quot;http://#{sponge}&quot;</span>)) <span class="ruby-operator">||</span> <span class="ruby-value str">''</span>&#x000A;          <span class="ruby-identifier">ip</span> = <span class="ruby-regexp re">/([0-9]{1,3}\.){3}[0-9]{1,3}/</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">ipstr</span>).<span class="ruby-identifier">to_s</span>&#x000A;          <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ip</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ip</span>.<span class="ruby-identifier">empty?</span>&#x000A;        <span class="ruby-keyword kw">end</span>&#x000A;      <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SocketError</span>, <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ETIMEDOUT</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>&#x000A;        <span class="ruby-constant">Stella</span>.<span class="ruby-identifier">le</span> <span class="ruby-value str">&quot;Connection Error. Check your internets!&quot;</span>&#x000A;      <span class="ruby-keyword kw">end</span>&#x000A;      <span class="ruby-identifier">ip</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000131'>
                <a name='M000131'>      </a>
                <div class='synopsis'>
                  <span class='name'>internal_ip_address</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Return the local IP address which receives external traffic from: <a
                  href="http://coderrr.wordpress.com/2008/05/28/get-your-local-ip-address">coderrr.wordpress.com/2008/05/28/get-your-local-ip-address</a>/
                  NOTE: This <em>does not</em> open a connection to the IP address.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000131-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000131-source'><span class="ruby-comment cmt"># File lib/stella/utils.rb, line 30</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">internal_ip_address</span>&#x000A;      <span class="ruby-comment cmt"># turn off reverse DNS resolution temporarily </span>&#x000A;      <span class="ruby-identifier">orig</span>, <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">do_not_reverse_lookup</span> = <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">do_not_reverse_lookup</span>, <span class="ruby-keyword kw">true</span>   &#x000A;      <span class="ruby-identifier">ip</span> = <span class="ruby-constant">UDPSocket</span>.<span class="ruby-identifier">open</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">connect</span>(<span class="ruby-value str">'75.101.137.7'</span>, <span class="ruby-value">1</span>); <span class="ruby-identifier">s</span>.<span class="ruby-identifier">addr</span>.<span class="ruby-identifier">last</span> } <span class="ruby-comment cmt"># Solutious IP</span>&#x000A;      <span class="ruby-identifier">ip</span>&#x000A;    <span class="ruby-keyword kw">ensure</span>  &#x000A;      <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">do_not_reverse_lookup</span> = <span class="ruby-identifier">orig</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000138'>
                <a name='M000138'>      </a>
                <div class='synopsis'>
                  <span class='name'>noindent</span>
                  <span class='arguments'>(str)</span>
                </div>
                <div class='description'>
                  <p>
                  Returns <tt>str</tt> with the leading indentation removed. Stolen from <a
                  href="http://github.com/mynyml/unindent/">github.com/mynyml/unindent/</a>
                  because it was better.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000138-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000138-source'><span class="ruby-comment cmt"># File lib/stella/utils.rb, line 137</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">noindent</span>(<span class="ruby-identifier">str</span>)&#x000A;      <span class="ruby-identifier">indent</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">$/</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span> <span class="ruby-operator">!</span><span class="ruby-identifier">line</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span> }.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp re">/[^\s]/</span>) }.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">min</span>&#x000A;      <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-node">/^[[:blank:]]{#{indent}}/</span>, <span class="ruby-value str">''</span>)&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000132'>
                <a name='M000132'>      </a>
                <div class='synopsis'>
                  <span class='name'>require_glob</span>
                  <span class='arguments'>(*path)</span>
                </div>
                <div class='description'>
                  <p>
                  <tt>require</tt> a glob of files.
                  </p>
                  <ul>
                  <li><tt>path</tt> is a list of path elements which is sent to File.join
                  
                  </li>
                  </ul>
                  <p>
                  and then to Dir.glob. The list of files found are sent to require. Nothing
                  is returned but LoadError exceptions are caught. The message is printed to
                  STDERR and the program exits with 7.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000132-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000132-source'><span class="ruby-comment cmt"># File lib/stella/utils.rb, line 45</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">require_glob</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">path</span>)&#x000A;      <span class="ruby-keyword kw">begin</span>&#x000A;        <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">path</span>.<span class="ruby-identifier">flatten</span>)).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>&#x000A;          <span class="ruby-identifier">require</span> <span class="ruby-identifier">path</span>&#x000A;        <span class="ruby-keyword kw">end</span>&#x000A;      <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">LoadError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>&#x000A;        <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Error: #{ex.message}&quot;</span>&#x000A;        <span class="ruby-identifier">exit</span> <span class="ruby-value">7</span>&#x000A;      <span class="ruby-keyword kw">end</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000133'>
                <a name='M000133'>      </a>
                <div class='synopsis'>
                  <span class='name'>require_vendor</span>
                  <span class='arguments'>(name, version)</span>
                </div>
                <div class='description'>
                  <p>
                  <tt>require</tt> a library from the vendor directory. The vendor directory
                  should be organized such that <tt>name</tt> and <tt>version</tt> can be
                  used to create the path to the library.
                  </p>
                  <p>
                  e.g.
                  </p>
                  <pre>vendor/httpclient-2.1.5.2/httpclient</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000133-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000133-source'><span class="ruby-comment cmt"># File lib/stella/utils.rb, line 66</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">require_vendor</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">version</span>)&#x000A;       <span class="ruby-identifier">$:</span>.<span class="ruby-identifier">unshift</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">STELLA_LIB_HOME</span>, <span class="ruby-value str">'..'</span>, <span class="ruby-value str">'vendor'</span>, <span class="ruby-node">&quot;#{name}-#{version}&quot;</span>)&#x000A;       <span class="ruby-identifier">require</span> <span class="ruby-identifier">name</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000135'>
                <a name='M000135'>      </a>
                <div class='synopsis'>
                  <span class='name'>service_available?</span>
                  <span class='arguments'>(host, port, wait=3)</span>
                </div>
                <div class='description'>
                  <p>
                  Checks whether something is listening to a socket.
                  </p>
                  <ul>
                  <li><tt>host</tt> A hostname
                  
                  </li>
                  <li><tt>port</tt> The port to check
                  
                  </li>
                  <li><tt>wait</tt> The number of seconds to wait for before timing out.
                  
                  </li>
                  </ul>
                  <p>
                  Returns true if <tt>host</tt> allows a socket connection on <tt>port</tt>.
                  Returns false if one of the following exceptions is raised:
                  Errno::EAFNOSUPPORT, Errno::ECONNREFUSED, SocketError, Timeout::Error
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000135-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000135-source'><span class="ruby-comment cmt"># File lib/stella/utils.rb, line 85</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">service_available?</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>, <span class="ruby-identifier">wait</span>=<span class="ruby-value">3</span>)&#x000A;      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Stella</span>.<span class="ruby-identifier">sysinfo</span>.<span class="ruby-identifier">vm</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:java</span>&#x000A;        <span class="ruby-keyword kw">begin</span>&#x000A;          <span class="ruby-identifier">iadd</span> = <span class="ruby-constant">Java</span><span class="ruby-operator">::</span><span class="ruby-constant">InetSocketAddress</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>      &#x000A;          <span class="ruby-identifier">socket</span> = <span class="ruby-constant">Java</span><span class="ruby-operator">::</span><span class="ruby-constant">Socket</span>.<span class="ruby-identifier">new</span>&#x000A;          <span class="ruby-identifier">socket</span>.<span class="ruby-identifier">connect</span> <span class="ruby-identifier">iadd</span>, <span class="ruby-identifier">wait</span> <span class="ruby-operator">*</span> <span class="ruby-value">1000</span>  <span class="ruby-comment cmt"># milliseconds</span>&#x000A;          <span class="ruby-identifier">success</span> = <span class="ruby-operator">!</span><span class="ruby-identifier">socket</span>.<span class="ruby-identifier">isClosed</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">socket</span>.<span class="ruby-identifier">isConnected</span>&#x000A;        <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NativeException</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>&#x000A;          <span class="ruby-identifier">puts</span> <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">backtrace</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Stella</span>.<span class="ruby-identifier">debug?</span>&#x000A;          <span class="ruby-keyword kw">false</span>&#x000A;        <span class="ruby-keyword kw">end</span>&#x000A;      <span class="ruby-keyword kw">else</span> &#x000A;        <span class="ruby-keyword kw">begin</span>&#x000A;          <span class="ruby-identifier">status</span> = <span class="ruby-constant">Timeout</span><span class="ruby-operator">::</span><span class="ruby-identifier">timeout</span>(<span class="ruby-identifier">wait</span>) <span class="ruby-keyword kw">do</span>&#x000A;            <span class="ruby-identifier">socket</span> = <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">AF_INET</span>, <span class="ruby-constant">SOCK_STREAM</span>, <span class="ruby-value">0</span> )&#x000A;            <span class="ruby-identifier">sockaddr</span> = <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">pack_sockaddr_in</span>( <span class="ruby-identifier">port</span>, <span class="ruby-identifier">host</span> )&#x000A;            <span class="ruby-identifier">socket</span>.<span class="ruby-identifier">connect</span>( <span class="ruby-identifier">sockaddr</span> )&#x000A;          <span class="ruby-keyword kw">end</span>&#x000A;          <span class="ruby-keyword kw">true</span>&#x000A;        <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EAFNOSUPPORT</span>, <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ECONNREFUSED</span>, <span class="ruby-constant">SocketError</span>, <span class="ruby-constant">Timeout</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>&#x000A;          <span class="ruby-identifier">puts</span> <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">class</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">backtrace</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Stella</span>.<span class="ruby-identifier">debug?</span>&#x000A;          <span class="ruby-keyword kw">false</span>&#x000A;        <span class="ruby-keyword kw">end</span>&#x000A;      <span class="ruby-keyword kw">end</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000137'>
                <a name='M000137'>      </a>
                <div class='synopsis'>
                  <span class='name'>strand</span>
                  <span class='arguments'>( len=8, safe=true )</span>
                </div>
                <div class='description'>
                  <p>
                  Generates a string of random alphanumeric characters.
                  </p>
                  <ul>
                  <li><tt>len</tt> is the length, an Integer. Default: 8
                  
                  </li>
                  <li><tt>safe</tt> in safe-mode, ambiguous characters are removed (default:
                  true):
                  
                  <pre>i l o 1 0</pre>
                  </li>
                  </ul>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000137-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000137-source'><span class="ruby-comment cmt"># File lib/stella/utils.rb, line 127</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">strand</span>( <span class="ruby-identifier">len</span>=<span class="ruby-value">8</span>, <span class="ruby-identifier">safe</span>=<span class="ruby-keyword kw">true</span> )&#x000A;       <span class="ruby-identifier">chars</span> = (<span class="ruby-value str">&quot;a&quot;</span><span class="ruby-operator">..</span><span class="ruby-value str">&quot;z&quot;</span>).<span class="ruby-identifier">to_a</span> <span class="ruby-operator">+</span> (<span class="ruby-value str">&quot;0&quot;</span><span class="ruby-operator">..</span><span class="ruby-value str">&quot;9&quot;</span>).<span class="ruby-identifier">to_a</span>&#x000A;       <span class="ruby-identifier">chars</span>.<span class="ruby-identifier">delete_if</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-node">%w(i l o 1 0)</span>.<span class="ruby-identifier">member?</span>(<span class="ruby-identifier">v</span>) } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">safe</span>&#x000A;       <span class="ruby-identifier">str</span> = <span class="ruby-value str">&quot;&quot;</span>&#x000A;       <span class="ruby-value">1</span>.<span class="ruby-identifier">upto</span>(<span class="ruby-identifier">len</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">chars</span>[<span class="ruby-identifier">rand</span>(<span class="ruby-identifier">chars</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>)] }&#x000A;       <span class="ruby-identifier">str</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000136'>
                <a name='M000136'>      </a>
                <div class='synopsis'>
                  <span class='name'>write_to_file</span>
                  <span class='arguments'>(filename, content, mode, chmod=0600)</span>
                </div>
                <div class='description'>
                  <p>
                  A basic file writer
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000136-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000136-source'><span class="ruby-comment cmt"># File lib/stella/utils.rb, line 112</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">write_to_file</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">content</span>, <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">chmod</span>=<span class="ruby-value">0600</span>)&#x000A;      <span class="ruby-identifier">mode</span> = (<span class="ruby-identifier">mode</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:append</span>) <span class="ruby-operator">?</span> <span class="ruby-value str">'a'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">'w'</span>&#x000A;      <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">filename</span>,<span class="ruby-identifier">mode</span>)&#x000A;      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">content</span>&#x000A;      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span>&#x000A;      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Stella</span>.<span class="ruby-identifier">sysinfo</span>.<span class="ruby-identifier">os</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:unix</span>&#x000A;      <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Provided chmod is not a Fixnum (#{chmod})&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">chmod</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Fixnum</span>)&#x000A;      <span class="ruby-constant">File</span>.<span class="ruby-identifier">chmod</span>(<span class="ruby-identifier">chmod</span>, <span class="ruby-identifier">filename</span>)&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
